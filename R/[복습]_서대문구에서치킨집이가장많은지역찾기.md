# [실습] 서대문구에서 치킨집이 가장 많은 지역 찾기

## 기본 복습

### 행렬

- 기본적으로 열로 생성

  ```R
  mat1 <- matrix(c(1,2,3,4))
  ```

  ```R
       [,1]
  [1,]    1
  [2,]    2
  [3,]    3
  [4,]    4
  ```

- nrow=n : n 행으로 구성(위에서 아래로)

  ```R
  mat2 <- matrix(c(1,2,3,4), nrow=2)
  ```

  ```R
       [,1] [,2]
  [1,]    1    3
  [2,]    2    4
  ```

- byrow=[T|F] : 행 우선 배치 유무

  ```R
  mat3 <- matrix(c(1,2,3,4), nrow=2, byrow=T)
  ```

  ```R
       [,1] [,2]
  [1,]    1    2
  [2,]    3    4
  ```

  

## 실습

> 서대문구 치킨집이 가장 많은 지역 찾기

### 01. 엑셀 파일 읽어오기

```R
library('readxl') # 패키지 로드
ck <- read_excel('data/치킨집_가공.xlsx') # 파일 경로
head(ck)
```

```R
  소재지전체주소                                사업장명         
  <chr>                                         <chr>            
1 서울특별시 서대문구 대현동 56-125번지         장군찜닭         
2 서울특별시 서대문구 북가좌동 294-15번지       거북골 곱창      
3 서울특별시 서대문구 충정로3가 268번지 외 5필지(270,270-1,271,2~ 위드미치코(with michi~
4 서울특별시 서대문구 홍은동 409-46번지 지하1층 반지하라운지     
5 서울특별시 서대문구 연희동 702-13번지 1층(105호)~ 마포갈비         
6 서울특별시 서대문구 창천동 53-96번지          마미당1948
```

### 02. 데이터 수정

> [소재지전체주소]에서 'xxx동' 만 남기고 이후 상세주소 삭제

#### substr(data, start, end) 함수 사용

```R
addr <- substr(ck$소재지전체주소, 11, 16)
head(addr)
```

```R
[1] " 대현동 5"  " 북가좌동 " " 충정로3가" " 홍은동 4" " 연희동 7"  " 창천동 5" 
```

- 동 이름이 4글자 또는 3글자 + 숫자로 되어 있음

  

#### gsub(변경전문자, 변경후문자, data) :  텍스트의 문자를 다른 문자로 대체해주는 함수

- 숫자제거 : 숫자를 ""로 대체
- 모든 숫자 표현 : [0-9]

```R
addr_num <- gsub('[0-9]','', addr)
head(addr_num)
```

```R
[1] " 대현동 "   " 북가좌동 " " 충정로가"  " 홍은동 "  " 연희동 "   " 창천동 " 
```
- 공백 제거

```R
addr_trim <- gsub(' ', '', addr_num)
head(addr_trim)
```

```R
[1] "대현동"   "북가좌동" "충정로가" "홍은동"   "연희동"  "창천동"  
```

#### 동별 업소 개수 확인

> 도수분포표 생성 - table() 함수
>
> 도수분포표를 데이터프레임으로 변환

- table() 함수 이용하여 도수분포표 작성

```R
# 파이프연산사 사용
library(dplyr)

addr_count <- addr_trim %>% table()
head(addr_count)
calss(addr_count) # [1] "table"
```

```R
남가좌동   냉천동   대신동   대현동   미근동   봉원동 
    2456      269      150     1589      207        5 
```

- 데이터프레임 생성

```R
addr_count <- addr_trim >%> table() %>% data.frame()
head(addr_count)
```

```R
        . Freq
1 남가좌동 2456
2   냉천동  269
3   대신동  150
4   대현동 1589
5   미근동  207
6   봉원동    5
```

- 변수명 변경 : rename(data, 변경후이름=변경전이름)

```R
addr_count <- rename(addr_count, '상호명'='.', '빈도'='Freq')
```

```R
    상호명 빈도
1 남가좌동 2456
2   냉천동  269
3   대신동  150
4   대현동 1589
5   미근동  207
6   봉원동    5
```



### 03. 트리맵(Tree Map)

```R
# treemap 패키지 설치 및 로드
install.packages('treemap')
library(treemap)

treemap(addr_count, index='상호명', vSize='빈도', title='서대문구 동별 치킨집 분포')
```

<img src="C:%5CUsers%5Ckimih%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20210309195345793.png" alt="image-20210309195345793" style="zoom:33%;" />



### 04. 내림차순 정렬하여 트리맵 제대로 표현되었는지 확인

```R
arrange(addr_count, desc(빈도)) %>% head()
```

```R
    상호명 빈도
1   창천동 3222
2 남가좌동 2456
3   홍제동 1779
4   대현동 1589
5   홍은동 1483
6   연희동 1338
```

